{% load static %}
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}{% endblock %}</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'admin/assets/imgs/theme/favicon.svg' %}">
    <!-- Template CSS -->
    <link href="{% static 'admin/assets/css/main.css' %}" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">

<!-- Cropper CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" rel="stylesheet">

<!-- Cropper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>



    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .wide-table {
            width: 100%; /* Set the width as needed */
            /* Add any additional styling you want */
        }
    </style>
</head>

<body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="#" class="brand-wrap">
                <h4>Autoparts</h4>
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i> </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item {% if '/admin_index/' in  request.path %} active {%endif%}">
                    <a class="menu-link" href="{% url 'adminside:admin_index' %}"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
      {% comment %} product{% endcomment %}
                <li class="menu-item has-submenu {% if '/product_list/' in  request.path or '/add_product/' in request.path %} active {%endif%}">
                    <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Product management</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url "adminside:product_list" %}">Product List</a>                    
                        <a href="{% url "adminside:add_product" %}">Add product</a>
                       
                     
                    </div>
                </li>

{% comment %} categoryyyyy {% endcomment %}
                <li class="menu-item has-submenu {% if '/characters_list/' in request.path or '/category_list/' in request.path or '/animecat_list/' in request.path%} active {%endif%}">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Category management</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url "adminside:category_list" %}">Category List</a>                       
                        <a href="{% url "adminside:animecat_list" %}">Anime_list</a>
                        <a href="{% url "adminside:character_list" %}">character_list</a>                                                   
                    </div>
                </li>

{% comment %} varient {% endcomment %}
            <li class="menu-item has-submenu {% if '/newvariant_list/' in  request.path or '/add_newvariant/' in request.path %} active {%endif%}">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Varient management</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url "adminside:newvariant_list" %}">Varient List</a>                                              
                        <a href="{% url "adminside:add_newvariant" %}">Add Varient</a>                       
                    </div>
                </li>

{% comment %} Stock_management {% endcomment %}


                    <li class="menu-item has-submenu {% if '/stock_list/' in request.path %} active {%endif%}">
                      <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Stock management</span>
                      </a>
                      <div class="submenu">
                        <a href="{% url "adminside:stock_list" %}">stock list</a>                       
                      </div>
                    </li>

{% comment %} order {% endcomment %}
                    <li class="menu-item has-submenu {% if '/order_list/' in  request.path %} active {%endif%}">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Orders management</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url "adminside:order_list" %}">Order list</a>
                    </div>
                </li>
{% comment %} user management {% endcomment %}
                    <li class="menu-item has-submenu {% if '/user_management/' in  request.path %} active {%endif%}">
                        <a class="menu-link" href="page-sellers-cards.html"> <i class="icon material-icons md-store"></i>
                        <span class="text">User management</span>
                    </a>
                    <div class="submenu">                    
                        <a href="{% url "adminside:user_management" %}">Users list</a>
                    </div>
                </li>

{% comment %} offer management {% endcomment %}

                <li class="menu-item has-submenu {% if '/offer_list/' in  request.path or '/create_product_offer/' in request.path or '/create_category_offer/' in request.path %} active {%endif%}">
                    <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Offer management</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url "adminside:offer_list" %}">Offer list</a>
                        <a href="{% url "adminside:create_product_offer" %}">New product offer</a>                                              
                        <a href="{% url "adminside:create_category_offer" %}">New category offer</a>                       
                    </div>
                </li>

{% comment %} coupon management {% endcomment %}
                <li class="menu-item has-submenu {% if '/create_coupon/' in  request.path or '/coupon_list/' in request.path %} active {%endif%}">
                    <a class="menu-link" href="page-sellers-cards.html"> <i class="icon material-icons md-store"></i>
                        <span class="text">Coupon management</span>
                    </a>
                    <div class="submenu">                 
                        <a href="{% url "adminside:create_coupon" %}">Add new Coupon</a>     
                        <a href="{% url "adminside:coupon_list" %}">Coupon list</a>
                    </div>
                </li>
                <li class="menu-item {% if '/sales_report/' in  request.path %} active {%endif%}">
                    <a class="menu-link" href="{% url "adminside:sales_report" %}"> <i class="icon material-icons md-comment"></i>
                        <span class="text">SalesReport</span>
                    </a>
                </li>               
            </ul>
            <hr>        
            <br>
            <br>
        </nav>
    </aside>

    <main class="main-wrap">
        <header class="main-header navbar">
            <div class="col-search">
                <form class="searchform">
                    
                    <datalist id="search_terms">
                        <option value="Products">
                        <option value="New orders">
                        <option value="Apple iphone">
                        <option value="Ahmed Hassan">
                    </datalist>
                </form>
            </div>
            <div class="col-nav">
                <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i class="material-icons md-apps"></i> </button>
                <ul class="nav">
                    <li class="dropdown nav-item">
                        {% if request.user.is_authenticated %}
                    
                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount" aria-expanded="false"> 
                            {{ request.user.username }}
                        </a>
                        {% endif %}
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                            <a class="dropdown-item text-danger" href="{% url 'adminside:admin_logout' %}"><i class="material-icons md-exit_to_app"></i>Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
        </header>
        <!-- Messages -->
<div class="container mt-3">
  {% if messages %}
    {% for message in messages %}
      {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
      {% elif message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
      {% elif message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
      {% else %}
        <div class="alert alert-info alert-dismissible fade show" role="alert">
      {% endif %}
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
  {% endif %}
</div>



        {% block body %}
        
        {% endblock %}
    </main>
    <script src="{% static 'admin/assets/js/vendors/jquery-3.6.0.min.js' %}"></script>\\\js
    <script src="{% static 'admin/assets/js/vendors/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'admin/assets/js/vendors/select2.min.js' %}"></script>
    <script src="{% static 'admin/assets/js/vendors/perfect-scrollbar.js' %}"></script>
    <script src="{% static 'admin/assets/js/vendors/jquery.fullscreen.min.js' %}"></script>
    <script src="{% static 'admin/assets/js/vendors/chart.js' %}"></script>
    <!-- Main Script -->
    <script src="{% static 'admin/assets/js/main.js' %}" type="text/javascript"></script>
    <script src="{% static 'admin/assets/js/custom-chart.js' %}" type="text/javascript"></script>
    <script>
    // Fix sidebar scrolling issue when minimized
    jQuery(document).ready(function($) {
        var asideElement = document.querySelector("#offcanvas_aside");
        var psInstance = null;
        var scrollHandler = null;
        
        // Function to force sidebar to stay fixed
        function forceSidebarFixed() {
            if (asideElement && $('body').hasClass('aside-mini')) {
                asideElement.style.position = 'fixed';
                asideElement.style.top = '0';
                asideElement.style.left = '0';
                asideElement.style.bottom = '0';
                asideElement.style.transform = 'translateZ(0)';
                asideElement.style.webkitTransform = 'translateZ(0)';
                asideElement.style.zIndex = '10';
            }
        }
        
        // Wait for main.js to initialize PerfectScrollbar
        setTimeout(function() {
            if (asideElement) {
                // Try to find PerfectScrollbar instance
                for (var key in asideElement) {
                    if (key.indexOf('ps') !== -1 || key.indexOf('scrollbar') !== -1) {
                        psInstance = asideElement[key];
                        break;
                    }
                }
            }
        }, 500);
        
        // Update scrollbar when sidebar is minimized/maximized
        $(document).on('click', '.btn-aside-minimize', function() {
            setTimeout(function() {
                if ($('body').hasClass('aside-mini')) {
                    // When minimized, destroy PerfectScrollbar and force fixed position
                    if (psInstance && typeof psInstance.destroy === 'function') {
                        try {
                            psInstance.destroy();
                        } catch(e) {}
                        psInstance = null;
                    }
                    
                    forceSidebarFixed();
                    
                    // Set up scroll listener to keep sidebar fixed
                    if (!scrollHandler) {
                        scrollHandler = function() {
                            forceSidebarFixed();
                        };
                        $(window).on('scroll', scrollHandler);
                        $(window).on('resize', scrollHandler);
                    }
                } else {
                    // When expanded, remove scroll handler
                    if (scrollHandler) {
                        $(window).off('scroll', scrollHandler);
                        $(window).off('resize', scrollHandler);
                        scrollHandler = null;
                    }
                }
            }, 150);
        });
        
        // Also force fixed on page load if already minimized
        if ($('body').hasClass('aside-mini')) {
            setTimeout(forceSidebarFixed, 100);
        }
    });
    </script>
</body>

</html>